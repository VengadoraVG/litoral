var ILevel = (function () {
  var Instance = (function () {
    var setPc = function (pc) {
      this.pc = pc;
    };

    var setMap = function (map) {
      this.tilemap = map;
    };    

    var create = function () {
      game.physics.startSystem(Phaser.Physics.ARCADE);
      game.physics.arcade.gravity.set(0,config.world.gravity);
    };

    var update = function () {
      game.physics.arcade.collide(this.pc, this.tilemap.floor);
      zOrder.sort();
    };

    return {
      setPc : setPc,
      setMap : setMap,

      create : create,
      update : update
    };
  })();

  var initialize = function (level) {
    level.setPc = Instance.setPc;
    level.setMap = Instance.setMap;

    level.creates = level.creates || [];
    level.creates.push(Instance.create);

    level.updates = level.updates || [];
    level.updates.push(Instance.update);
  };

  return {
    initialize : initialize
  };
})();
